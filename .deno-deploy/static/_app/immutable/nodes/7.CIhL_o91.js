import"../chunks/DhCF9jbZ.js";import{p as W,a0 as X,a1 as Z,a2 as q,l as ot,a as D,b as o,c as H,j as E,f as h,s as n,i as t,Z as nt,_ as it,$ as N,d as r,r as e,n as z,e as M,t as k}from"../chunks/CU_KDlvJ.js";import{d as lt,s as $}from"../chunks/RGkzFezX.js";import{i as J}from"../chunks/3IU1t4Q3.js";import{e as dt,i as ct}from"../chunks/DRtSYLZz.js";import{g as K}from"../chunks/67qOq2eY.js";import{p as vt}from"../chunks/CTuhGcu5.js";import{a as O}from"../chunks/XvJA7dni.js";import{g as mt}from"../chunks/DNTWffCH.js";import"../chunks/BdjFXjfA.js";import{P as ut,B as j}from"../chunks/DyKHyZRR.js";import{P as gt,A as pt,a as ft,L as _t}from"../chunks/DdzB1G47.js";import{ct as ht}from"../chunks/CT1gxbDm.js";var xt=h("<!> <!> <!>",1);function yt(x,c){W(c,!0),X(async()=>{const R=[2015,2016,2017,2018,2019,2020,2021,2022,2023,2024],g=(await Z(Promise.all(R.map(s=>ht("getCountryRankings",{start:String(s),end:String(s)})))))(),l=E(()=>R.map((s,d)=>{const m=g[d]?.rankings.find(u=>u.country===c.country);return{year:s,emissions:m?.emissionsQuantity||0}}));if(!q()){var v=ot(),C=D(v);{var A=s=>{gt(s,{height:50,marginLeft:15,children:(d,m)=>{var u=xt(),y=D(u);pt(y,{title:!1,tickCount:2,tickFontSize:10});var P=n(y,2);ft(P,{title:!1,tickCount:0});var S=n(P,2);_t(S,{get data(){return t(l)},x:"year",y:"emissions",curve:"monotone-x",stroke:"var(--color-primary)",strokeWidth:1.5}),o(d,u)},$$slots:{default:!0}})};J(C,s=>{t(l)&&s(A)})}o(x,v)}}),H()}var Pt=h('<div class="flex min-h-[60vh] items-center justify-center"><div class="text-center"><div class="loading loading-spinner loading-lg text-primary"></div> <p class="mt-4 text-xs text-muted">Loading rankings...</p></div></div>'),bt=(x,c)=>K(`/country/${t(c).country}`),kt=h('<tr class="hover:bg-base-200 cursor-pointer"><td> </td><td><!></td><td class="max-w-[0px]"><!></td><td><!></td><td class="tabular-nums text-right"><!></td></tr>'),$t=h('<div class="overflow-x-auto"><table class="table"><thead><tr><th>Rank</th><th>Country</th><th>Trend (2015-2024)</th><th class="text-right">Emissions (tonnes COâ‚‚e)</th><th class="text-right">Per Capita</th></tr></thead><tbody></tbody></table></div>'),Et=h('<section class="px-section-x py-section-y"><div class="flex items-center justify-between"><h1 class="text-3xl font-bold mb-4">Global Emissions Rankings</h1> <!></div> <!></section>');function Ft(x,c){W(c,!0),X(async()=>{const g=(await Z(mt()))();let l=nt(it(parseInt(vt.url.searchParams.get("page")||"1")));const v=E(()=>(t(l)-1)*20),C=E(()=>t(v)+20),A=E(()=>g?.rankings.slice(t(v),t(C))||[]);function s(a){N(l,a,!0),K(`?page=${a}`,{keepFocus:!0,noScroll:!1})}if(!q()){var d=Et(),m=r(d),u=n(r(m),2);ut(u,{get count(){return g.rankings.length},perPage:20,onPageChange:s,get page(){return t(l)},set page(a){N(l,a,!0)}}),e(m);var y=n(m,2);{var P=a=>{var p=Pt();o(a,p)},S=a=>{var p=$t(),B=r(p),F=n(r(B));dt(F,21,()=>t(A),ct,(U,f,V)=>{var b=kt();b.__click=[bt,f];var I=r(b),tt=r(I,!0);e(I);var w=n(I),at=r(w);j(at,{size:"16",children:(_,Y)=>{z();var i=M();k(()=>$(i,t(f).name)),o(_,i)},$$slots:{default:!0}}),e(w);var T=n(w),et=r(T);yt(et,{get country(){return t(f).country}}),e(T);var G=n(T),st=r(G);j(st,{as:"div",size:"16",class:"text-right w-full tabular-nums",children:(_,Y)=>{z();var i=M();k(L=>$(i,L),[()=>O(t(f).emissionsQuantity)]),o(_,i)},$$slots:{default:!0}}),e(G);var Q=n(G),rt=r(Q);j(rt,{as:"div",size:"16",class:"text-right w-full tabular-nums",children:(_,Y)=>{z();var i=M();k(L=>$(i,L),[()=>O(t(f).emissionsPerCapita)]),o(_,i)},$$slots:{default:!0}}),e(Q),e(b),k(()=>$(tt,t(v)+V+1)),o(U,b)}),e(F),e(B),e(p),o(a,p)};J(y,a=>{g?a(S,!1):a(P)})}e(d),o(x,d)}}),H()}lt(["click"]);export{Ft as component};
