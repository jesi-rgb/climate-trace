import"../chunks/DhCF9jbZ.js";import{p as Mt,Z as p,_ as C,f as b,s as a,d as e,r as t,t as k,i as s,b as c,c as Ot,$ as l,l as Zt,a as Pt,n as I}from"../chunks/CU_KDlvJ.js";import{d as qt,s as d}from"../chunks/RGkzFezX.js";import{p as zt,i as pt}from"../chunks/3IU1t4Q3.js";import{e as T,s as kt,i as L,a as Lt}from"../chunks/DRtSYLZz.js";import{ct as F}from"../chunks/CT1gxbDm.js";import{f as ot,a as J}from"../chunks/XvJA7dni.js";var Bt=(vt,U,M)=>U(s(M)),Ht=b("<button> </button>"),Jt=b('<div class="flex items-center justify-center py-4"><div></div></div>'),Vt=b('<div class="rounded border border-subtle bg-base-100 p-3 text-center"><p class="text-[10px] text-muted">No data available for this sector</p></div>'),Xt=b('<div class="rounded border border-subtle bg-base-100 p-1.5"><div class="flex items-start justify-between"><div class="flex-1 min-w-0"><h3 class="text-[10px] font-semibold text-base-content truncate"> </h3> <p class="text-[9px] text-muted"> </p></div> <div class="text-right ml-2 shrink-0"><div> </div> <div class="text-[8px] text-muted">tonnes</div></div></div></div>'),Yt=b('<div class="space-y-1"></div>'),te=b('<div class="mt-2"><h3 class="text-[11px] font-semibold text-base-content mb-1.5"> </h3> <!></div>'),ee=b('<div class="bg-base-200 border border-subtle join-item p-2.5"><h2 class="text-[11px] font-semibold text-base-content mb-1.5">All Monitored Sectors</h2> <div class="flex flex-wrap gap-1 mb-2"></div> <!></div>');function se(vt,U){Mt(U,!0);let M=zt(U,"sectors",19,()=>[]),R=p(null),Q=p(C([])),W=p(!1);const nt={power:{color:"warning",title:"Power Sector Sources"},transportation:{color:"info",title:"Transportation Sources"},"fossil-fuel-operations":{color:"error",title:"Fossil Fuel Operations"},manufacturing:{color:"success",title:"Manufacturing Sources"}};async function lt(x){l(W,!0),l(R,x,!0);try{const n=await F("getSources",{year:2022,sectors:[x],limit:12});l(Q,Array.isArray(n)?n:[],!0),n||console.warn(`No data returned for sector: ${x}`)}catch(n){console.error(`Failed to load ${x} data:`,n),l(Q,[],!0)}finally{l(W,!1)}}function Z(x){return nt[x]?.color||"primary"}function ct(x){return nt[x]?.title||ot(x)}var q=ee(),z=a(e(q),2);T(z,21,M,L,(x,n)=>{var S=Ht();S.__click=[Bt,lt,n];var Y=e(S,!0);t(S),k((tt,_)=>{kt(S,1,`badge badge-sm text-[9px] ${tt??""}`),d(Y,_)},[()=>s(R)===s(n)?`badge-${Z(s(n))}`:"badge-primary",()=>ot(s(n))]),c(x,S)}),t(z);var V=a(z,2);{var X=x=>{var n=te(),S=e(n),Y=e(S,!0);t(S);var tt=a(S,2);{var _=f=>{var h=Jt(),G=e(h);t(h),k(u=>kt(G,1,`loading loading-spinner loading-sm text-${u??""}`),[()=>Z(s(R))]),c(f,h)},E=f=>{var h=Zt(),G=Pt(h);{var u=y=>{var D=Vt();c(y,D)},et=y=>{var D=Yt();T(D,23,()=>s(Q),(B,O)=>B.sourceId||`${s(R)}-${O}`,(B,O)=>{var P=Xt(),st=e(P),H=e(st),at=e(H),rt=e(at,!0);t(at);var it=a(at,2),xt=e(it,!0);t(it),t(H);var bt=a(H,2),K=e(bt),ut=e(K,!0);t(K),I(2),t(bt),t(st),t(P),k((mt,_t)=>{d(rt,s(O).name),d(xt,s(O).country),kt(K,1,`font-mono text-[10px] font-bold text-${mt??""}`),d(ut,_t)},[()=>Z(s(R)),()=>J(s(O).emissionsQuantity)]),c(B,P)}),t(D),c(y,D)};pt(G,y=>{s(Q).length===0?y(u):y(et,!1)},!0)}c(f,h)};pt(tt,f=>{s(W)?f(_):f(E,!1)})}t(n),k(f=>d(Y,f),[()=>ct(s(R))]),c(x,n)};pt(V,x=>{s(R)&&x(X)})}t(q),c(vt,q),Ot()}qt(["click"]);var ae=b('<div class="flex min-h-[60vh] items-center justify-center"><div class="text-center"><div class="loading loading-spinner loading-lg text-primary"></div> <p class="mt-4 text-xs text-muted">Loading dashboard data...</p></div></div>'),re=b('<div class="flex items-center justify-between text-[11px]"><div class="flex items-center gap-1.5 flex-1 min-w-0"><div class="flex h-4 w-4 shrink-0 items-center justify-center rounded bg-base-300 font-mono text-[9px] font-bold text-base-content"></div> <span class="text-base-content truncate"> </span></div> <span class="font-mono text-[9px] text-muted ml-2 shrink-0"> </span></div>'),ie=b('<div><div class="mb-0.5 flex items-center justify-between text-[10px]"><span class="text-base-content truncate"> </span> <span class="font-mono text-muted ml-2 shrink-0"> </span></div> <div class="h-0.5 w-full overflow-hidden rounded-full bg-base-300"><div class="h-full bg-primary"></div></div></div>'),de=b('<div><div class="mb-0.5 flex items-center justify-between text-[10px]"><span class="text-base-content truncate"> </span> <span class="font-mono text-muted ml-2 shrink-0"> </span></div> <div class="h-0.5 w-full overflow-hidden rounded-full bg-base-300"><div class="h-full bg-secondary"></div></div></div>'),oe=b('<div class="rounded border border-subtle bg-base-100 p-1.5 text-center"><div class="text-base font-bold text-primary"> </div> <div class="text-[9px] font-semibold text-base-content truncate"> </div> <div class="font-mono text-[8px] text-muted"> </div></div>'),ve=b('<div class="rounded border border-subtle bg-base-100 p-1.5"><div class="flex items-start justify-between"><div class="flex-1 min-w-0"><h3 class="text-[10px] font-semibold text-base-content truncate"> </h3> <p class="text-[9px] text-muted"> </p></div> <div class="text-right ml-2 shrink-0"><div class="font-mono text-[10px] font-bold text-primary"> </div> <div class="text-[8px] text-muted">tonnes</div></div></div></div>'),ne=b('<div class="badge badge-accent badge-sm text-[9px]"> </div>'),le=b('<div class="badge badge-secondary badge-sm text-[9px]"> </div>'),ce=b('<div class="grid lg:grid-cols-6 join"><div class="bg-base-200 border border-subtle join-item p-2"><h2 class="text-[10px] font-medium text-muted uppercase tracking-wide">Global Emissions</h2> <div class="mt-1"><div class="font-bold text-primary"> </div> <p class="text-[9px] text-muted">CO2e (2022)</p></div></div> <div class="bg-base-200 border border-subtle join-item p-2"><h2 class="text-[10px] font-medium text-muted uppercase tracking-wide">Sources</h2> <div class="mt-1"><div class="font-bold text-secondary"> </div> <p class="text-[9px] text-muted">Tracked worldwide</p></div></div> <div class="bg-base-200 border border-subtle join-item p-2"><h2 class="text-[10px] font-medium text-muted uppercase tracking-wide">Sectors</h2> <div class="mt-1"><div class="font-bold text-accent"> </div> <p class="text-[9px] text-muted">Industrial sectors</p></div></div> <div class="bg-base-200 border border-subtle join-item p-2"><h2 class="text-[10px] font-medium text-muted uppercase tracking-wide">Subsectors</h2> <div class="mt-1"><div class="font-bold text-warning"> </div> <p class="text-[9px] text-muted">Subsector categories</p></div></div> <div class="bg-base-200 border border-subtle join-item p-2"><h2 class="text-[10px] font-medium text-muted uppercase tracking-wide">Countries</h2> <div class="mt-1"><div class="font-bold text-info"> </div> <p class="text-[9px] text-muted">With data available</p></div></div> <div class="bg-base-200 border border-subtle join-item p-2"><h2 class="text-[10px] font-medium text-muted uppercase tracking-wide">Continents</h2> <div class="mt-1"><div class="font-bold text-success"> </div> <p class="text-[9px] text-muted">Geographic regions</p></div></div></div> <div class="grid lg:grid-cols-4 join"><div class="bg-base-200 border border-t-0 border-subtle join-item p-2.5"><h2 class="text-[11px] font-semibold text-base-content mb-1.5">Top Countries by Emissions</h2> <div class="space-y-1"></div></div> <div class="bg-base-200 border border-t-0 border-subtle join-item p-2.5"><h2 class="text-[11px] font-semibold text-base-content mb-1.5">Emissions by Sector</h2> <div class="space-y-1"></div></div> <div class="bg-base-200 border border-subtle border-t-0 join-item p-2.5"><h2 class="text-[11px] font-semibold text-base-content mb-1.5">Top Subsectors</h2> <div class="space-y-1"></div></div> <div class="bg-base-200 border border-subtle border-t-0 join-item p-2.5"><h2 class="text-[11px] font-semibold text-base-content mb-1.5">Regional Leaders</h2> <div class="grid grid-cols-2 gap-1.5"></div></div></div> <div class="grid lg:grid-cols-3 join"><div class="bg-base-200 border border-subtle join-item p-2.5"><h2 class="text-[11px] font-semibold text-base-content mb-1.5">Top Emission Sources (All)</h2> <div class="space-y-1"></div></div> <!> <div class="bg-base-200 border border-subtle join-item p-2.5"><h3 class="text-[11px] font-semibold text-base-content mb-1">Continents</h3> <div class="flex flex-wrap gap-1 mb-2"></div> <h3 class="mt-2 text-[11px] font-semibold text-base-content mb-1">Key Gases</h3> <div class="flex flex-wrap gap-0.5"></div></div></div>',1),xe=b('<main class="px-section-x py-section-y"><!></main>');function he(vt,U){Mt(U,!0);let M=p(C([])),R=p(C([])),Q=p(C([])),W=p(C([])),nt=p(C([])),lt=p(null),Z=p(C([])),ct=p(C([])),q=p(C([])),z=p(C([])),V=p(C([])),X=p(!0);async function x(){l(X,!0);try{const[_,E,f,h,G,u,et,y]=await Promise.all([F("getSources",{year:2022,limit:30}),F("getCountryRankings",{gas:"co2e_100yr",start:"2022",end:"2022"}),F("getSectors",void 0),F("getSubsectors",void 0),F("getGases",void 0),F("getAggregatedEmissions",{year:2022}),F("getCountries",void 0),F("getContinents",void 0)]);l(M,_||[],!0),l(R,(E?.rankings||[]).slice(0,25),!0),l(Q,f||[],!0),l(W,h||[],!0),l(nt,G||[],!0),l(lt,u,!0),l(z,et||[],!0),l(V,y||[],!0),u?.sectors?.summaries&&Array.isArray(u.sectors.summaries)&&u.sectors.summaries.length>0&&l(Z,u.sectors.summaries,!0),u?.subsectors?.summaries&&Array.isArray(u.subsectors.summaries)&&u.subsectors.summaries.length>0&&l(ct,u.subsectors.summaries.slice(0,20),!0),l(q,(E?.rankings||[]).slice(0,10),!0)}catch(_){console.error("Failed to load dashboard:",_)}finally{l(X,!1)}}x();var n=xe(),S=e(n);{var Y=_=>{var E=ae();c(_,E)},tt=_=>{var E=ce(),f=Pt(E),h=e(f),G=a(e(h),2),u=e(G),et=e(u);t(u),I(2),t(G),t(h);var y=a(h,2),D=a(e(y),2),B=e(D),O=e(B);t(B),I(2),t(D),t(y);var P=a(y,2),st=a(e(P),2),H=e(st),at=e(H,!0);t(H),I(2),t(st),t(P);var rt=a(P,2),it=a(e(rt),2),xt=e(it),bt=e(xt,!0);t(xt),I(2),t(it),t(rt);var K=a(rt,2),ut=a(e(K),2),mt=e(ut),_t=e(mt,!0);t(mt),I(2),t(ut),t(K);var St=a(K,2),$t=a(e(St),2),Ct=e($t),Kt=e(Ct,!0);t(Ct),I(2),t($t),t(St),t(f);var ft=a(f,2),gt=e(ft),Rt=a(e(gt),2);T(Rt,21,()=>s(R),L,(m,r,i)=>{var o=re(),v=e(o),g=e(v);g.textContent=i+1;var w=a(g,2),$=e(w,!0);t(w),t(v);var j=a(v,2),A=e(j);t(j),t(o),k(N=>{d($,s(r).name||s(r).country),d(A,`${N??""} t`)},[()=>J(s(r).emissionsQuantity)]),c(m,o)}),t(Rt),t(gt);var ht=a(gt,2),At=a(e(ht),2);T(At,21,()=>s(Z),L,(m,r)=>{var i=ie(),o=e(i),v=e(o),g=e(v,!0);t(v);var w=a(v,2),$=e(w);t(w),t(o);var j=a(o,2),A=e(j);t(j),t(i),k((N,dt)=>{d(g,N),d($,`${dt??""}%`),Lt(A,`width: ${s(r).percentage??""}%`)},[()=>ot(s(r).sector),()=>s(r).percentage.toFixed(1)]),c(m,i)}),t(At),t(ht);var yt=a(ht,2),Et=a(e(yt),2);T(Et,21,()=>s(ct),L,(m,r)=>{var i=de(),o=e(i),v=e(o),g=e(v,!0);t(v);var w=a(v,2),$=e(w);t(w),t(o);var j=a(o,2),A=e(j);t(j),t(i),k((N,dt)=>{d(g,N),d($,`${dt??""}%`),Lt(A,`width: ${s(r).percentage??""}%`)},[()=>ot(s(r).subsector),()=>s(r).percentage.toFixed(1)]),c(m,i)}),t(Et),t(yt);var Ft=a(yt,2),Tt=a(e(Ft),2);T(Tt,21,()=>s(q),L,(m,r)=>{var i=oe(),o=e(i),v=e(o);t(o);var g=a(o,2),w=e(g,!0);t(g);var $=a(g,2),j=e($);t($),t(i),k(A=>{d(v,`#${s(r).rank??""}`),d(w,s(r).name||s(r).country),d(j,`${A??""} t`)},[()=>J(s(r).emissionsQuantity)]),c(m,i)}),t(Tt),t(Ft),t(ft);var Qt=a(ft,2),wt=e(Qt),Gt=a(e(wt),2);T(Gt,21,()=>s(M),L,(m,r)=>{var i=ve(),o=e(i),v=e(o),g=e(v),w=e(g,!0);t(g);var $=a(g,2),j=e($);t($),t(v);var A=a(v,2),N=e(A),dt=e(N,!0);t(N),I(2),t(A),t(o),t(i),k((Ut,Wt)=>{d(w,s(r).name),d(j,`${Ut??""} • ${s(r).country??""}`),d(dt,Wt)},[()=>ot(s(r).sector),()=>J(s(r).emissionsQuantity)]),c(m,i)}),t(Gt),t(wt);var Dt=a(wt,2);se(Dt,{get sectors(){return s(Q)}});var Nt=a(Dt,2),jt=a(e(Nt),2);T(jt,21,()=>s(V),L,(m,r)=>{var i=ne(),o=e(i,!0);t(i),k(()=>d(o,s(r))),c(m,i)}),t(jt);var It=a(jt,4);T(It,20,()=>["co2","ch4","n2o","co2e_100yr","co2e_20yr"],L,(m,r)=>{var i=le(),o=e(i,!0);t(i),k(v=>d(o,v),[()=>r.toUpperCase()]),c(m,i)}),t(It),t(Nt),t(Qt),k((m,r)=>{d(et,`${m??""} t`),d(O,`${r??""}+`),d(at,s(Q).length),d(bt,s(W).length),d(_t,s(z).length),d(Kt,s(V).length)},[()=>J(s(lt)?.totals?.summaries?.[0]?.emissionsQuantity||0,0),()=>J(s(M).length*100,0)]),c(_,E)};pt(S,_=>{s(X)?_(Y):_(tt,!1)})}t(n),c(vt,n),Ot()}export{he as component};
