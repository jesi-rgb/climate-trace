import"../chunks/DhCF9jbZ.js";import{p as ht,k as Y,b as r,c as bt,i as t,j as w,s as l,d as e,r as a,l as X,a as q,n as K,e as ct,f as L,Z as dt,t as st,$ as W,a0 as Qt,a1 as rt,ap as ut,a2 as Ft,aq as $t}from"../chunks/CU_KDlvJ.js";import{d as jt,s as E}from"../chunks/RGkzFezX.js";import{i as M,r as Nt}from"../chunks/3IU1t4Q3.js";import{e as ft,s as Tt,i as gt}from"../chunks/DRtSYLZz.js";import{g as Ht,a as It,r as Rt,s as mt,b as Ut,c as Xt}from"../chunks/CXfiyq03.js";import{p as qt}from"../chunks/CTuhGcu5.js";import{f as nt,a as pt}from"../chunks/XvJA7dni.js";import{g as Bt,a as Dt,b as Gt}from"../chunks/CjLDFfF2.js";import{L as Ot}from"../chunks/CJWz1K8P.js";import{F as Zt}from"../chunks/CWA0H_qR.js";import{X as Vt,F as St}from"../chunks/-nUHUx3E.js";import{s as Jt}from"../chunks/DHB6DlLB.js";import{C as kt}from"../chunks/Du01RrpP.js";import"../chunks/BdjFXjfA.js";import"../chunks/67qOq2eY.js";import{P as Kt}from"../chunks/DyKHyZRR.js";import{H as _t}from"../chunks/BZUj1zCj.js";var Wt=Y('<path d="M234.36,170A12,12,0,0,1,230,186.37l-96,56a12,12,0,0,1-12.1,0l-96-56a12,12,0,0,1,12.09-20.74l90,52.48L218,165.63A12,12,0,0,1,234.36,170ZM218,117.63,128,170.11,38.05,117.63A12,12,0,0,0,26,138.37l96,56a12,12,0,0,0,12.1,0l96-56A12,12,0,0,0,218,117.63ZM20,80a12,12,0,0,1,6-10.37l96-56a12.06,12.06,0,0,1,12.1,0l96,56a12,12,0,0,1,0,20.74l-96,56a12,12,0,0,1-12.1,0l-96-56A12,12,0,0,1,20,80Zm35.82,0L128,122.11,200.18,80,128,37.89Z"></path>'),Yt=Y('<path d="M224,80l-96,56L32,80l96-56Z" opacity="0.2"></path><path d="M230.91,172A8,8,0,0,1,228,182.91l-96,56a8,8,0,0,1-8.06,0l-96-56A8,8,0,0,1,36,169.09l92,53.65,92-53.65A8,8,0,0,1,230.91,172ZM220,121.09l-92,53.65L36,121.09A8,8,0,0,0,28,134.91l96,56a8,8,0,0,0,8.06,0l96-56A8,8,0,1,0,220,121.09ZM24,80a8,8,0,0,1,4-6.91l96-56a8,8,0,0,1,8.06,0l96,56a8,8,0,0,1,0,13.82l-96,56a8,8,0,0,1-8.06,0l-96-56A8,8,0,0,1,24,80Zm23.88,0L128,126.74,208.12,80,128,33.26Z"></path>',1),ta=Y('<path d="M220,169.09l-92,53.65L36,169.09A8,8,0,0,0,28,182.91l96,56a8,8,0,0,0,8.06,0l96-56A8,8,0,1,0,220,169.09Z"></path><path d="M220,121.09l-92,53.65L36,121.09A8,8,0,0,0,28,134.91l96,56a8,8,0,0,0,8.06,0l96-56A8,8,0,1,0,220,121.09Z"></path><path d="M28,86.91l96,56a8,8,0,0,0,8.06,0l96-56a8,8,0,0,0,0-13.82l-96-56a8,8,0,0,0-8.06,0l-96,56a8,8,0,0,0,0,13.82Z"></path>',1),aa=Y('<path d="M229.18,173a6,6,0,0,1-2.16,8.2l-96,56a6,6,0,0,1-6,0l-96-56a6,6,0,0,1,6-10.36l93,54.23,93-54.23A6,6,0,0,1,229.18,173ZM221,122.82l-93,54.23L35,122.82a6,6,0,0,0-6,10.36l96,56a6,6,0,0,0,6,0l96-56a6,6,0,0,0-6-10.36ZM26,80a6,6,0,0,1,3-5.18l96-56a6,6,0,0,1,6,0l96,56a6,6,0,0,1,0,10.36l-96,56a6,6,0,0,1-6,0l-96-56A6,6,0,0,1,26,80Zm17.91,0L128,129.05,212.09,80,128,31Z"></path>'),ea=Y('<path d="M230.91,172A8,8,0,0,1,228,182.91l-96,56a8,8,0,0,1-8.06,0l-96-56A8,8,0,0,1,36,169.09l92,53.65,92-53.65A8,8,0,0,1,230.91,172ZM220,121.09l-92,53.65L36,121.09A8,8,0,0,0,28,134.91l96,56a8,8,0,0,0,8.06,0l96-56A8,8,0,1,0,220,121.09ZM24,80a8,8,0,0,1,4-6.91l96-56a8,8,0,0,1,8.06,0l96,56a8,8,0,0,1,0,13.82l-96,56a8,8,0,0,1-8.06,0l-96-56A8,8,0,0,1,24,80Zm23.88,0L128,126.74,208.12,80,128,33.26Z"></path>'),ra=Y('<path d="M227.45,174a4,4,0,0,1-1.44,5.48l-96,56a4,4,0,0,1-4,0l-96-56a4,4,0,0,1,4-6.92l94,54.83,94-54.83A4,4,0,0,1,227.45,174ZM222,124.54l-94,54.83L34,124.54a4,4,0,0,0-4,6.92l96,56a4,4,0,0,0,4,0l96-56a4,4,0,0,0-4-6.92ZM28,80a4,4,0,0,1,2-3.46l96-56a4,4,0,0,1,4,0l96,56a4,4,0,0,1,0,6.92l-96,56a4,4,0,0,1-4,0l-96-56A4,4,0,0,1,28,80Zm11.94,0L128,131.37,216.06,80,128,28.63Z"></path>'),sa=Y('<svg><!><rect width="256" height="256" fill="none"></rect><!></svg>');function ia(N,o){ht(o,!0);const d=Ht();let _=Nt(o,["$$slots","$$events","$$legacy","children"]),h=w(()=>o.weight??d.weight??"regular"),A=w(()=>o.color??d.color??"currentColor"),B=w(()=>o.size??d.size??"1em"),tt=w(()=>o.mirrored??d.mirrored??!1);function D(s){let{weight:f,color:H,size:at,mirrored:S,...v}=s;return v}var T=sa();It(T,(s,f)=>({xmlns:"http://www.w3.org/2000/svg",role:"img",width:t(B),height:t(B),fill:t(A),transform:t(tt)?"scale(-1, 1)":void 0,viewBox:"0 0 256 256",...s,...f}),[()=>D(d),()=>D(_)]);var G=e(T);{var u=s=>{var f=X(),H=q(f);Jt(H,()=>o.children),r(s,f)};M(G,s=>{o.children&&s(u)})}var z=l(G,2);{var $=s=>{var f=Wt();r(s,f)},n=s=>{var f=X(),H=q(f);{var at=v=>{var b=Yt();K(),r(v,b)},S=v=>{var b=X(),C=q(b);{var P=y=>{var Z=ta();K(2),r(y,Z)},j=y=>{var Z=X(),I=q(Z);{var O=i=>{var c=aa();r(i,c)},g=i=>{var c=X(),Q=q(c);{var R=k=>{var F=ea();r(k,F)},it=k=>{var F=X(),m=q(F);{var V=p=>{var x=ra();r(p,x)},J=p=>{var x=ct();x.nodeValue=(console.error('Unsupported icon weight. Choose from "thin", "light", "regular", "bold", "fill", or "duotone".'),""),r(p,x)};M(m,p=>{t(h)==="thin"?p(V):p(J,!1)},!0)}r(k,F)};M(Q,k=>{t(h)==="regular"?k(R):k(it,!1)},!0)}r(i,c)};M(I,i=>{t(h)==="light"?i(O):i(g,!1)},!0)}r(y,Z)};M(C,y=>{t(h)==="fill"?y(P):y(j,!1)},!0)}r(v,b)};M(H,v=>{t(h)==="duotone"?v(at):v(S,!1)},!0)}r(s,f)};M(z,s=>{t(h)==="bold"?s($):s(n,!1)})}a(T),r(N,T),bt()}function la(N,o,d){W(o,t(o)==="desc"?"asc":"desc",!0),W(d,1)}var oa=L('<div class="flex items-center gap-2"><!> <h2 class="card-title">Top Emission Sources</h2></div>'),na=(N,o)=>W(o,null),va=L('<button type="button" class="btn btn-ghost btn-xs">Clear</button>'),ca=(N,o,d)=>o(t(d)),da=L('<input type="radio" name="subsector-filter"/>'),ua=L('<tr class="hover"><td><a class="link link-hover"> </a></td><td><a class="link link-hover"> </a></td><td class="text-sm opacity-70"> </td><td class="text-right tabular-nums"> </td></tr>'),ma=L('<tr><td colspan="4" class="text-center text-muted">No sources found</td></tr>'),_a=L('<div class="px-4 pb-4 space-y-4"><div><div class="flex items-center justify-between mb-2"><span class="label-text font-medium">Filter by Subsector</span> <!></div> <div class="filter"></div></div> <!> <div class="overflow-x-auto"><table class="table table-sm"><thead><tr><th>Source Name</th><th>Country</th><th>Subsector</th><th class="text-right"><button type="button" class="link link-hover"> </button></th></tr></thead><tbody></tbody></table></div></div>');function fa(N,o){ht(o,!0);const d=10;let _=dt(null),h=dt("desc"),A=dt(1),B=w(()=>{let u=[...o.sources];return t(_)&&(u=u.filter(z=>z.subsector===t(_))),u.sort((z,$)=>{const n=z.emissionsQuantity-$.emissionsQuantity;return t(h)==="desc"?-n:n}),u}),tt=w(()=>{const u=(t(A)-1)*d,z=u+d;return t(B).slice(u,z)}),D=w(()=>t(B).length);function T(u){W(_,t(_)===u?null:u,!0),W(A,1)}function G(u){W(A,u,!0)}kt(N,{title:$=>{var n=oa(),s=e(n);Zt(s,{size:24,weight:"bold",class:"text-warning"}),K(2),a(n),r($,n)},content:$=>{var n=_a(),s=e(n),f=e(s),H=l(e(f),2);{var at=g=>{var i=va();i.__click=[na,_],r(g,i)};M(H,g=>{t(_)&&g(at)})}a(f);var S=l(f,2);ft(S,21,()=>o.subsectors,gt,(g,i)=>{var c=da();Rt(c),c.__change=[ca,T,i],st(Q=>{Tt(c,1,`btn ${t(_)===t(i)?"":"filter-reset"}`),mt(c,"aria-label",Q),Ut(c,t(_)===t(i))},[()=>nt(t(i))]),r(g,c)}),a(S),a(s);var v=l(s,2);Kt(v,{get count(){return t(D)},perPage:d,onPageChange:G,get page(){return t(A)},set page(g){W(A,g,!0)}});var b=l(v,2),C=e(b),P=e(C),j=e(P),y=l(e(j),3),Z=e(y);Z.__click=[la,h,A];var I=e(Z);a(Z),a(y),a(j),a(P);var O=l(P);ft(O,21,()=>t(tt),gt,(g,i)=>{var c=ua(),Q=e(c),R=e(Q),it=e(R,!0);a(R),a(Q);var k=l(Q),F=e(k),m=e(F,!0);a(F),a(k);var V=l(k),J=e(V,!0);a(V);var p=l(V),x=e(p,!0);a(p),a(c),st((et,U)=>{mt(R,"href",`/source/${t(i).id??""}`),E(it,t(i).name||"Unknown"),mt(F,"href",`/country/${t(i).country??""}`),E(m,t(i).country),E(J,et),E(x,U)},[()=>nt(t(i).subsector),()=>pt(t(i).emissionsQuantity)]),r(g,c)},g=>{var i=ma();r(g,i)}),a(O),a(C),a(b),a(n),st(()=>E(I,`Emissions ${t(h)==="desc"?"↓":"↑"}`)),r($,n)},$$slots:{title:!0,content:!0}}),bt()}jt(["click","change"]);var ga=L('<div class="flex min-h-[60vh] items-center justify-center"><div class="text-center"><div class="loading loading-spinner loading-lg text-primary"></div> <p class="mt-4 text-xs opacity-60">Loading sector data...</p></div></div>'),pa=L('<div class="flex min-h-[60vh] items-center justify-center"><div class="alert alert-error max-w-md"><!> <div><!> <a href="/" class="link link-hover">Return to home</a></div></div></div>'),ha=L('<div class="flex items-center gap-2"><!> <!></div>'),ba=L('<div><div class="flex justify-between items-center mb-1"><span class="text-sm font-medium"> </span> <span class="text-sm font-bold tabular-nums"> </span></div> <div class="flex items-center gap-2"><progress class="progress progress-secondary w-full" max="100"></progress> <span class="text-xs opacity-60 tabular-nums min-w-[3rem]"> </span></div></div>'),xa=L('<div class="px-4 pb-4 space-y-3"></div>'),ya=L('<div class="px-section-x py-section-y"><div class="mb-4"><div class="breadcrumbs text-sm mb-2"><ul><li><a href="/" class="link link-hover">Home</a></li> <li><a href="/sectors" class="link link-hover">Sectors</a></li> <li> </li></ul></div> <div class="flex items-center gap-4"><!> <div class="badge badge-primary badge-lg"> </div></div></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-2 mb-2"><!> <!> <!> <!></div></div>');function Ia(N,o){ht(o,!0),Qt(async()=>{let d=w(()=>qt.params.sector),_=(await rt(ut(async()=>(await rt(Bt(t(d))))())))(),h=(await rt(ut(async()=>(await rt(Dt(t(d))))())))(),A=(await rt(ut(async()=>(await rt(Gt({sector:t(d),limit:50})))())))(),B=w(()=>t(h).subsectors.summaries[0]?.emissionsQuantity??0),tt=w(()=>t(_).subSectors.length),D=w(()=>t(h).subsectors.summaries?t(h).subsectors.summaries.sort((n,s)=>s.emissionsQuantity-n.emissionsQuantity):[]),T=w(()=>t(_).subSectors);if(!Ft()){var G=X(),u=q(G);{var z=n=>{var s=ga();r(n,s)},$=n=>{var s=X(),f=q(s);{var H=S=>{var v=pa(),b=e(v),C=e(b);Vt(C,{size:24,weight:"bold"});var P=l(C,2),j=e(P);_t(j,{as:"h3",children:(y,Z)=>{K();var I=ct("Sector not found");r(y,I)},$$slots:{default:!0}}),K(2),a(P),a(b),a(v),r(S,v)},at=S=>{var v=ya(),b=e(v),C=e(b),P=e(C),j=l(e(P),4),y=e(j,!0);a(j),a(P),a(C);var Z=l(C,2),I=e(Z);_t(I,{size:"h1",children:(m,V)=>{K();var J=ct();st(p=>E(J,p),[()=>nt(t(_).name)]),r(m,J)},$$slots:{default:!0}});var O=l(I,2),g=e(O);a(O),a(Z),a(b);var i=l(b,2),c=e(i);{let m=w(()=>pt(t(B)));St(c,{get icon(){return Ot},title:"Total Emissions",get value(){return t(m)},subtitle:"tonnes CO₂e",color:"primary"})}var Q=l(c,2);St(Q,{get icon(){return ia},title:"Subsectors",get value(){return t(tt)},subtitle:"categories",color:"info"});var R=l(Q,2);{var it=m=>{kt(m,{title:p=>{var x=ha(),et=e(x);Zt(et,{size:24,weight:"fill",class:"text-secondary"});var U=l(et,2);_t(U,{as:"h2",class:"card-title",children:(lt,vt)=>{K();var ot=ct("Top Subsectors by Emissions");r(lt,ot)},$$slots:{default:!0}}),a(x),r(p,x)},content:p=>{var x=xa();ft(x,21,()=>t(D),gt,(et,U)=>{var lt=ba(),vt=e(lt),ot=e(vt),Mt=e(ot,!0);a(ot);var xt=l(ot,2),Lt=e(xt,!0);a(xt),a(vt);var yt=l(vt,2),wt=e(yt),At=l(wt,2),Ct=e(At);a(At),a(yt),a(lt),st((Pt,Et,zt)=>{E(Mt,Pt),E(Lt,Et),Xt(wt,t(U).percentage),E(Ct,`${zt??""}%`)},[()=>nt(t(U).subsector),()=>pt(t(U).emissionsQuantity),()=>t(U).percentage.toFixed(1)]),r(et,lt)}),a(x),r(p,x)},$$slots:{title:!0,content:!0}})};M(R,m=>{t(D).length>0&&m(it)})}var k=l(R,2);{var F=m=>{fa(m,{get sources(){return t(A)},get subsectors(){return t(T)}})};M(k,m=>{t(A)&&t(A).length>0&&m(F)})}a(i),a(v),st(m=>{E(y,m),E(g,`${t(tt)??""} subsectors`)},[()=>nt(t(_).name)]),r(S,v)};M(f,S=>{t(_)?S(at,!1):S(H)},!0)}r(n,s)};M(u,n=>{$t()?n(z):n($,!1)})}r(N,G)}}),bt()}export{Ia as component};
